using Skclusive.Core.Component;

namespace Skclusive.Script.DomHelpers
{
    public class DomHelpersScript : Scripted
    {
        public DomHelpersScript() : base("DomHelpers")
        {
        }

        protected override string GetScript()
        {
            return @"!function(){""use strict"";function e(e){return e&&e.ownerDocument||document}function t(t){void 0===t&&(t=e());try{var n=t.activeElement;return n&&n.nodeName?n:null}catch(e){return t.body}}function n(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==("" ""+(e.className.baseVal||e.className)+"" "").indexOf("" ""+t+"" "")}function o(e,t){e.classList?e.classList.add(t):n(e,t)||(""string""==typeof e.className?e.className=e.className+"" ""+t:e.setAttribute(""class"",(e.className&&e.className.baseVal||"""")+"" ""+t))}var r=!(""undefined""==typeof window||!window.document||!window.document.createElement),i=!1,s=!1;try{var c={get passive(){return i=!0},get once(){return s=i=!0}};r&&(window.addEventListener(""test"",c,c),window.removeEventListener(""test"",c,!0))}catch(e){}function a(e,t,n,o){if(o&&""boolean""!=typeof o&&!s){var r=o.once,c=o.capture,a=n;!s&&r&&(a=n.__once||function e(o){this.removeEventListener(t,e,c),n.call(this,o)},n.__once=a),e.addEventListener(t,a,i?o:c)}e.addEventListener(t,n,o)}var u=(new Date).getTime();var l=""clearTimeout"",f=function(e){var t=(new Date).getTime(),n=Math.max(0,16-(t-u)),o=setTimeout(e,n);return u=t,o},d=function(e,t){return e+(e?t[0].toUpperCase()+t.substr(1):t)+""AnimationFrame""};r&&["""",""webkit"",""moz"",""o"",""ms""].some((function(e){var t=d(e,""request"");return t in window&&(l=d(e,""cancel""),f=function(e){return window[t](e)}),!!f}));var m,p=function(e){""function""==typeof window[l]&&window[l](e)},v=f;function h(e,t){if(!m){var n=document.body,o=n.matches||n.matchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector;m=function(e,t){return o.call(e,t)}}return m(e,t)}function g(e,t,n){e.closest&&!n&&e.closest(t);var o=e;do{if(h(o,t))return o;o=o.parentElement}while(o&&o!==n&&o.nodeType===document.ELEMENT_NODE);return null}function w(e,t){return e.contains?e.contains(t):e.compareDocumentPosition?e===t||!!(16&e.compareDocumentPosition(t)):void 0}function y(t){var n=e(t);return n&&n.defaultView||window}var E=/([A-Z])/g;var N=/^ms-/;function T(e){return function(e){return e.replace(E,""-$1"").toLowerCase()}(e).replace(N,""-ms-"")}var b=/^((translate|rotate|scale)(X|Y|Z|3d)?|matrix(3d)?|perspective|skew(X|Y)?)$/i;function L(e,t){var n="""",o="""";if(""string""==typeof t)return e.style.getPropertyValue(T(t))||function(e,t){return y(e).getComputedStyle(e,t)}(e).getPropertyValue(T(t));Object.keys(t).forEach((function(r){var i=t[r];i||0===i?!function(e){return!(!e||!b.test(e))}(r)?n+=T(r)+"": ""+i+"";"":o+=r+""(""+i+"") "":e.style.removeProperty(T(r))})),o&&(n+=""transform: ""+o+"";""),e.style.cssText+="";""+n}var C=Function.prototype.bind.call(Function.prototype.call,[].slice);function S(e,t){return C(e.querySelectorAll(t))}function _(e,t){return function(n){var o=n.currentTarget,r=n.target;S(o,e).some((function(e){return w(e,r)}))&&t.call(this,n)}}function P(e){return""nodeType""in e&&e.nodeType===document.DOCUMENT_NODE}function O(e){return""window""in e&&e.window===e?e:P(e)&&e.defaultView||!1}function A(e){var t=""pageXOffset""===e?""scrollLeft"":""scrollTop"";return function(n,o){var r=O(n);if(void 0===o)return r?r[e]:n[t];r?r.scrollTo(r[e],o):n[t]=o}}var D=A(""pageXOffset""),W=A(""pageYOffset"");function k(t){var n=e(t),o={top:0,left:0,height:0,width:0},r=n&&n.documentElement;return r&&w(r,t)?(void 0!==t.getBoundingClientRect&&(o=t.getBoundingClientRect()),o={top:o.top+W(t)-(r.clientTop||0),left:o.left+D(t)-(r.clientLeft||0),width:o.width,height:o.height}):o}function x(e,t){var n=O(e);return n?n.innerHeight:t?e.clientHeight:k(e).height}function M(e,t,n,o){var r=o&&""boolean""!=typeof o?o.capture:o;e.removeEventListener(t,n,r),n.__once&&e.removeEventListener(t,n.__once,r)}function V(e,t,n,o){return a(e,t,n,o),function(){M(e,t,n,o)}}var F=function(e){return!!e&&""offsetParent""in e};function H(t){for(var n=e(t),o=t&&t.offsetParent;F(o)&&""HTML""!==o.nodeName&&""static""===L(o,""position"");)o=o.offsetParent;return o||n.documentElement}function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}var q=function(e){return e.nodeName&&e.nodeName.toLowerCase()};function B(e,t){var n,o={top:0,left:0};if(""fixed""===L(e,""position""))n=e.getBoundingClientRect();else{var r=t||H(e);n=k(e),""html""!==q(r)&&(o=k(r));var i=String(L(r,""borderTopWidth"")||0);o.top+=parseInt(i,10)-W(r)||0;var s=String(L(r,""borderLeftWidth"")||0);o.left+=parseInt(s,10)-D(r)||0}var c=String(L(e,""marginTop"")||0),a=String(L(e,""marginLeft"")||0);return $({},n,{top:n.top-o.top-(parseInt(c,10)||0),left:n.left-o.left-(parseInt(a,10)||0)})}function I(e,t){return e.replace(new RegExp(""(^|\\s)""+t+""(?:\\s|$)"",""g""),""$1"").replace(/\s+/g,"" "").replace(/^\s*|\s*$/g,"""")}function R(e,t){e.classList?e.classList.remove(t):""string""==typeof e.className?e.className=I(e.className,t):e.setAttribute(""class"",I(e.className&&e.className.baseVal||"""",t))}function j(e,t){var n=L(e,""position""),o=""absolute""===n,r=e.ownerDocument;if(""fixed""===n)return r||document;for(;(e=e.parentNode)&&!P(e);){var i=o&&""static""===L(e,""position""),s=(L(e,""overflow"")||"""")+(L(e,""overflow-y"")||"""")+L(e,""overflow-x"");if(!i&&(/(auto|scroll)/.test(s)&&(t||x(e)<e.scrollHeight)))return e}return r||document}function X(e,t){e.classList?e.classList.toggle(t):n(e,t)?R(e,t):o(e,t)}function z(e,t){var n=O(e);return n?n.innerWidth:t?e.clientWidth:k(e).width}var Y={addEventListener:a,removeEventListener:M,filter:_,listen:V,style:L,activeElement:t,ownerDocument:e,ownerWindow:y,requestAnimationFrame:v,cancelAnimationFrame:p,matches:h,height:x,width:z,offset:k,offsetParent:H,position:B,contains:w,scrollParent:j,scrollTop:W,querySelectorAll:S,closest:g,addClass:o,removeClass:R,hasClass:n,toggleClass:X},U=Object.freeze({__proto__:null,addEventListener:a,removeEventListener:M,filter:_,listen:V,style:L,activeElement:t,ownerDocument:e,ownerWindow:y,requestAnimationFrame:v,cancelAnimationFrame:p,matches:h,height:x,width:z,offset:k,offsetParent:H,position:B,contains:w,scrollParent:j,scrollTop:W,querySelectorAll:S,closest:g,addClass:o,removeClass:R,hasClass:n,toggleClass:X,default:Y});function Z(e){e&&e.parentNode&&e.parentNode.removeChild(e)}const G=function(){let e=1e4;return()=>e++}();function J(e){if(e){const t=G();return function(e,t){e.setAttribute(function(e){return`_bl_${e}`}(t),"""")}(e,t),`${t}`}return null}function K(e){e.scrollTop}function Q(e,t,n){t.forEach(t=>o(e,t)),n&&K(e)}function ee(e,t){t.forEach(t=>R(e,t))}window.Skclusive={...window.Skclusive,Script:{...(window.Skclusive||{}).Script,DomHelpers:{...U,generateId:function(){return Math.random().toString(36).substr(2)},activeElement:function(n){return J(t(e(n)))},closest:function(e,t,n){return J(g(e,t,n))},offsetParent:function(e){return J(H(e))},repaint:K,setStyle:function(e,t,n){L(e,t),n&&K(e)},getStyle:function(e,t){return L(e,t)},addClasses:Q,removeClasses:ee,updateClasses:function(e,t,n,o){ee(e,t),Q(e,n),o&&K(e)},focus:function(e){e&&setTimeout(()=>e.focus(),100)},blur:function(e){e&&setTimeout(()=>e.blur(),1)},moveContent:function(t,n,o){if(t){let r=null;for(r=n||e(o).body;t.childNodes.length>0;){const e=t.childNodes[0];8!==e.nodeType?r.appendChild(e):Z(e)}}},clearContent:function(e){for(;e.childNodes.length>0;)e.removeChild(e.childNodes[0])},getBoundry:function(e){return e?e.getBoundingClientRect():{width:0,height:0,left:0,top:0}},getScrollParent:function(e,t){let n=t,o=0;for(;n&&n!==e;)n=n.parentNode,o+=n.scrollTop;return o},debounce:function(e,t=166){let n;function o(...o){const r=this;clearTimeout(n),n=setTimeout(()=>{e.apply(r,o)},t)}return o.clear=()=>{clearTimeout(n)},o},goBack:function(e){setTimeout(()=>history.go(e),2e3)},getElementOffset:function(e){return{width:e.offsetWidth,height:e.offsetHeight}},getWindowOffset:function(e){const t=y(e);return{width:t.innerWidth,height:t.innerHeight}},getInputValue:function(e){return e&&e.value},removeNode:Z}}}}();";
        }
    }
}
